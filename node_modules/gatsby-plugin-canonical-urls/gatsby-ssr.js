import React from "react";
import url from "url";
export const onRenderBody = ({
  setHeadComponents,
  pathname: _pathname = `/`
}, pluginOptions) => {
  if (pluginOptions && pluginOptions.siteUrl) {
    const siteUrl = pluginOptions.siteUrl.replace(/\/$/, ``);
    const parsed = url.parse(`${siteUrl}${_pathname}`);
    const stripQueryString = typeof pluginOptions.stripQueryString !== `undefined` ? pluginOptions.stripQueryString : false;
    let pageUrl = ``;

    if (stripQueryString) {
      pageUrl = `${parsed.protocol}//${parsed.host}${parsed.pathname}`;
    } else {
      pageUrl = parsed.href;
    }

    setHeadComponents([/*#__PURE__*/React.createElement("link", {
      rel: "canonical",
      key: pageUrl,
      href: pageUrl,
      "data-baseprotocol": parsed.protocol,
      "data-basehost": parsed.host
    })]);
  }
};